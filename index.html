<!DOCTYPE html>

<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PTN NEWS PRO â€” LIVE STUDIO</title>
<link href="https://fonts.googleapis.com/css2?family=Tiro+Devanagari+Hindi:ital@0;1&family=Noto+Sans+Devanagari:wght@400;700;900&family=Bebas+Neue&family=Rajdhani:wght@500;600;700&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT VARIABLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --red:       #ff1a1a;
  --red-dark:  #8b0000;
  --cyan:      #00eeff;
  --gold:      #ffcc00;
  --gold2:     #ff9900;
  --white:     #f0f6ff;
  --panel-bg:  rgba(2, 8, 18, 0.93);
  --glow-red:  0 0 24px #ff1a1aaa, 0 0 60px #ff1a1a44;
  --glow-cyan: 0 0 20px #00eeffaa, 0 0 50px #00eeff33;
  --glow-gold: 0 0 20px #ffcc00aa;
  --border-cyan: 2px solid #00eeff66;
  --border-red:  3px solid #ff1a1a99;
}

- { margin:0; padding:0; box-sizing:border-box; }

body, html {
width:100%; height:100%;
background:#000;
overflow:hidden;
font-family:â€˜Rajdhaniâ€™, sans-serif;
color:#fff;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STUDIO STAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#studio {
position:relative;
width:100vw; height:100vh;
background:
radial-gradient(ellipse 80% 60% at 60% 30%, #071428 0%, #000 70%),
radial-gradient(ellipse 40% 40% at 10% 80%, #1a0000 0%, transparent 60%);
overflow:hidden;
}

/* Animated dot-grid */
#studio::before {
content:â€™â€™;
position:absolute; inset:0; pointer-events:none; z-index:0;
background-image: radial-gradient(circle, #00eeff18 1px, transparent 1px);
background-size: 38px 38px;
animation: dotPulse 6s ease-in-out infinite;
}
@keyframes dotPulse { 0%,100%{opacity:.3} 50%{opacity:.8} }

/* Corner decorative lines */
#studio::after {
content:â€™â€™;
position:absolute; inset:0; pointer-events:none; z-index:1;
background:
linear-gradient(90deg, transparent 49.9%, #00eeff08 50%, transparent 50.1%),
linear-gradient(0deg,  transparent 49.9%, #00eeff08 50%, transparent 50.1%);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TOP HEADER BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#header {
position:absolute; top:0; left:0; right:0; height:72px;
background: linear-gradient(90deg, #ff1a1a 0%, #800000 35%, #1a000080 70%, transparent 100%);
display:flex; align-items:center; padding:0 24px;
z-index:15;
border-bottom:2px solid #ff1a1a88;
box-shadow: 0 6px 40px #ff1a1a55, 0 2px 0 #ff1a1a44;
}

/* Animated left accent bar */
#header::before {
content:â€™â€™;
position:absolute; left:0; top:0; bottom:0; width:6px;
background: linear-gradient(180deg, #fff, #ff1a1a, #ff9900);
animation: barGlow 2s ease-in-out infinite alternate;
}
@keyframes barGlow { from{opacity:.6} to{opacity:1; box-shadow:0 0 20px #fff} }

.logo-wrap { display:flex; align-items:center; gap:14px; }

.logo-icon {
width:48px; height:48px;
background: radial-gradient(circle, #ff4444, #cc0000);
border-radius:50%;
display:flex; align-items:center; justify-content:center;
font-size:22px;
box-shadow: var(â€“glow-red);
animation: iconPulse 2s ease-in-out infinite;
}
@keyframes iconPulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.07)} }

.logo-text {
font-family:â€˜Orbitronâ€™; font-size:32px; font-weight:900;
letter-spacing:6px; color:#fff;
text-shadow: 0 0 30px #fff8, var(â€“glow-red);
}

.logo-sub {
font-size:10px; letter-spacing:3px; color:#ffaaaa;
text-transform:uppercase; font-weight:500;
margin-top:-4px;
}

/* Center: Channel name */
#channelName {
position:absolute; left:50%; transform:translateX(-50%);
font-family:â€˜Bebas Neueâ€™; font-size:28px; letter-spacing:8px;
color:#ffcc00; text-shadow: var(â€“glow-gold);
border-bottom:1px solid #ffcc0044;
padding-bottom:2px;
}

/* Right: Live + Clock */
.header-right { margin-left:auto; display:flex; align-items:center; gap:16px; }

#liveTag {
display:flex; align-items:center; gap:8px;
background: linear-gradient(135deg, #ff0000, #cc0000);
font-family:â€˜Orbitronâ€™; font-size:16px; font-weight:700; letter-spacing:3px;
padding:7px 20px; border-radius:6px;
box-shadow: var(â€“glow-red);
border:1px solid #ff666688;
}

#liveDot {
width:10px; height:10px; border-radius:50%; background:#fff;
box-shadow:0 0 8px #fff;
animation: blink 1s step-end infinite;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }

#timeDisplay {
font-family:â€˜Orbitronâ€™; font-size:18px; font-weight:700;
color:var(â€“cyan); letter-spacing:2px;
text-shadow: var(â€“glow-cyan);
}

#dateDisplay {
font-size:10px; letter-spacing:2px; color:#ffffff66;
text-align:right; line-height:1.4; font-family:â€˜Rajdhaniâ€™;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SCRIPT / TELEPROMPTER BOX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#scriptBox {
position:absolute;
left:2%; top:82px;
width:47%; height:64%;
background: linear-gradient(135deg, rgba(2,8,20,0.97) 0%, rgba(10,2,20,0.95) 100%);
border-radius:14px;
border:1px solid #ffffff10;
border-left:6px solid var(â€“red);
padding:0;
overflow:hidden;
box-shadow:
var(â€“glow-red),
inset 0 0 60px #00000099,
0 8px 40px #00000088;
z-index:5;
}

/* Script header bar */
#scriptHeader {
background: linear-gradient(90deg, #ff1a1a22, transparent);
border-bottom:1px solid #ff1a1a44;
padding:10px 18px;
display:flex; align-items:center; gap:10px;
}

#scriptHeader .sh-dot {
width:8px; height:8px; border-radius:50%;
}
#scriptHeader .sh-dot:nth-child(1) { background:#ff5f57; }
#scriptHeader .sh-dot:nth-child(2) { background:#febc2e; }
#scriptHeader .sh-dot:nth-child(3) { background:#28c840; }

#scriptHeader .sh-label {
margin-left:6px;
font-size:11px; letter-spacing:3px; color:#ff6666; text-transform:uppercase;
font-family:â€˜Orbitronâ€™; font-weight:700;
}

#scriptHeader .sh-news-num {
margin-left:auto;
font-size:11px; color:#ffffff44; letter-spacing:2px;
}

/* Teleprompter text */
#prompterWrap {
padding:20px 24px 80px 24px;
height:calc(100% - 42px);
overflow:hidden;
position:relative;
}

#teleprompter {
font-family:â€˜Noto Sans Devanagariâ€™, sans-serif;
font-size:36px;
line-height:1.8;
font-weight:700;
position:relative; top:0;
transition: top 0.3s linear;
text-align:justify;
color:#e8f0ff;
text-shadow:
0 0 30px #4488ff44,
0 2px 4px #000;
letter-spacing:0.5px;
}

/* Active word highlight â€” glow line at top */
#prompterWrap::before {
content:â€™â€™;
position:absolute; top:0; left:0; right:0; height:3px;
background: linear-gradient(90deg, transparent, var(â€“red), transparent);
animation: scanLine 3s linear infinite;
z-index:2;
}
@keyframes scanLine {
0%   { opacity:0; transform:translateX(-100%); }
50%  { opacity:1; }
100% { opacity:0; transform:translateX(100%); }
}

/* Bottom fade */
#prompterWrap::after {
content:â€™â€™;
position:absolute; bottom:0; left:0; right:0; height:90px;
background: linear-gradient(transparent, rgba(2,8,20,0.97));
pointer-events:none; z-index:3;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VISUAL / IMAGE BOX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#visualBox {
position:absolute; right:2.5%; top:82px;
width:44%; height:44%;
border-radius:14px;
overflow:hidden;
background:#000;
border:2px solid #00eeff44;
box-shadow: var(â€“glow-cyan), 0 8px 40px #000a;
z-index:5;
}

/* Top label */
#visualBox::before {
content:â€˜â—‰ VISUAL FEEDâ€™;
position:absolute; top:0; left:0; right:0;
background: linear-gradient(90deg, #00eeff22, transparent);
border-bottom:1px solid #00eeff33;
font-size:10px; letter-spacing:3px; color:var(â€“cyan);
padding:7px 14px; font-family:â€˜Orbitronâ€™;
z-index:4;
}

/* Corner brackets */
#visualBox .vb-tl, #visualBox .vb-tr,
#visualBox .vb-bl, #visualBox .vb-br {
position:absolute; width:20px; height:20px; z-index:5;
}
#visualBox .vb-tl { top:0;    left:0;  border-top:2px solid var(â€“cyan); border-left:2px solid var(â€“cyan); }
#visualBox .vb-tr { top:0;    right:0; border-top:2px solid var(â€“cyan); border-right:2px solid var(â€“cyan); }
#visualBox .vb-bl { bottom:0; left:0;  border-bottom:2px solid var(â€“cyan); border-left:2px solid var(â€“cyan); }
#visualBox .vb-br { bottom:0; right:0; border-bottom:2px solid var(â€“cyan); border-right:2px solid var(â€“cyan); }

#newsImg {
width:100%; height:100%;
object-fit:contain;
background:#000;
transform-origin:center center;
filter:brightness(.95) contrast(1.05);
}

@keyframes kenZoomIn  { 0%{transform:scale(1)}    100%{transform:scale(1.1)} }
@keyframes kenZoomOut { 0%{transform:scale(1.1)}  100%{transform:scale(1)}   }
#newsImg.ken-in  { animation: kenZoomIn  9s ease-in-out forwards; }
#newsImg.ken-out { animation: kenZoomOut 9s ease-in-out forwards; }

/* Scanlines over image */
#visualBox .scanlines {
position:absolute; inset:0; pointer-events:none; z-index:3;
background: repeating-linear-gradient(
0deg, transparent 0px, transparent 3px, rgba(0,0,0,0.07) 3px, rgba(0,0,0,0.07) 4px
);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ANCHOR (Chroma Key Canvas)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#anchorWrap {
position:absolute; right:0; bottom:96px;
width:58%; height:74%;
pointer-events:none; z-index:6;
display:flex; justify-content:flex-end; align-items:flex-end;
}
#anchorCanvas {
max-width:100%; max-height:100%;
filter: drop-shadow(-12px 0 40px #000d) drop-shadow(0 -4px 20px #0008);
}
#anchorVid { display:none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LOWER THIRD â€” Breaking News Bar
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#lowerThird {
position:absolute; left:2%; bottom:100px;
width:62%; z-index:8;
opacity:0; transform:translateY(16px) scaleX(0.97);
transform-origin: left center;
transition: opacity 0.5s ease, transform 0.5s cubic-bezier(.22,.68,0,1.3);
}
#lowerThird.show { opacity:1; transform:translateY(0) scaleX(1); }

/* â€œBREAKING NEWSâ€ red tab */
#ltTag {
display:inline-flex; align-items:center; gap:8px;
background: linear-gradient(90deg, #ff0000, #cc0000);
font-family:â€˜Orbitronâ€™; font-size:13px; font-weight:700;
letter-spacing:3px; padding:5px 16px 5px 12px;
clip-path: polygon(0 0, 100% 0, calc(100% - 10px) 100%, 0 100%);
box-shadow: var(â€“glow-red);
}

#ltTagDot {
width:7px; height:7px; border-radius:50%; background:#fff;
animation: blink 1s step-end infinite;
}

/* Headline subline */
#ltSubline {
display:block;
background: linear-gradient(90deg, rgba(0,0,0,.95) 0%, rgba(5,12,30,.92) 100%);
border-left:5px solid var(â€“gold);
border-bottom:1px solid #ffffff18;
font-family:â€˜Noto Sans Devanagariâ€™; font-size:32px; font-weight:900;
padding:10px 20px;
color:var(â€“gold);
text-shadow: 0 0 20px #ffcc0066, 0 2px 4px #000;
transition: opacity 0.4s ease, transform 0.4s ease;
letter-spacing:0.5px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROGRESS / SPEECH BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#progressBar {
position:absolute; bottom:92px; left:0; right:0; height:4px;
background:#ffffff0a; z-index:11;
}
#progressFill {
height:100%; width:0%;
background: linear-gradient(90deg, var(â€“red), var(â€“cyan));
box-shadow: 0 0 10px var(â€“cyan);
transition: width 0.3s linear;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TICKER BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#tickerBar {
position:absolute; bottom:0; left:0; right:0;
height:90px; z-index:12;
display:flex; align-items:stretch;
background: linear-gradient(90deg, #a00000 0%, #600000 50%, #380000 100%);
border-top:3px solid #ff1a1a;
box-shadow: 0 -6px 30px #ff000066;
}

#tickerLabel {
background: linear-gradient(180deg, #ff2222, #aa0000);
min-width:130px; width:130px;
display:flex; flex-direction:column;
align-items:center; justify-content:center; gap:2px;
border-right:2px solid #ffffff22;
box-shadow: var(â€“glow-red);
}

#tickerLabel .tl-main {
font-family:â€˜Orbitronâ€™; font-size:17px; font-weight:900;
letter-spacing:3px; color:#fff;
text-shadow: 0 0 14px #fff8;
}
#tickerLabel .tl-sub {
font-family:â€˜Rajdhaniâ€™; font-size:10px; letter-spacing:3px;
color:#ffaaaa; text-transform:uppercase;
}

/* Separator dot */
#tickerSep {
width:3px; background: #ffffff15;
display:flex; align-items:center; justify-content:center;
}

#tickerText {
flex:1; overflow:hidden;
display:flex; align-items:center;
}

#tickerInner {
white-space:nowrap;
font-family:â€˜Rajdhaniâ€™; font-size:40px; font-weight:700;
padding:0 60px;
animation: tickerScroll 35s linear infinite;
color:#fff;
text-shadow: 0 2px 8px #0008;
}
#tickerInner .sep { color:var(â€“gold); margin:0 20px; }

@keyframes tickerScroll {
0%   { transform:translateX(100vw); }
100% { transform:translateX(-100%); }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SIDE STATS PANEL (Right of visual)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#sidePanel {
position:absolute; right:2.5%; top:calc(82px + 44% + 12px);
width:44%; z-index:5;
display:flex; gap:8px;
}

.stat-card {
flex:1;
background: var(â€“panel-bg);
border:1px solid #ffffff10;
border-radius:8px;
padding:8px 12px;
text-align:center;
}
.stat-card .sc-val {
font-family:â€˜Orbitronâ€™; font-size:18px; font-weight:700;
color:var(â€“cyan);
}
.stat-card .sc-lbl {
font-size:9px; letter-spacing:2px; color:#ffffff44;
text-transform:uppercase; margin-top:2px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
GEAR / CONTROLS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#gearBtn {
position:fixed; bottom:98px; right:14px;
z-index:25;
background: linear-gradient(135deg, rgba(0,238,255,.12), rgba(0,0,0,.9));
border:2px solid #00eeff44;
border-radius:50%; width:52px; height:52px;
display:flex; align-items:center; justify-content:center;
cursor:pointer; font-size:22px;
transition:all 0.3s;
box-shadow: 0 4px 20px #000a;
}
#gearBtn:hover { border-color:var(â€“cyan); box-shadow:var(â€“glow-cyan); transform:rotate(60deg); }

#controlPanel {
position:fixed; bottom:162px; right:14px;
width:220px;
background: rgba(2,8,20,0.97);
border:1px solid #00eeff33;
border-radius:14px;
padding:16px;
z-index:24;
display:none;
box-shadow: var(â€“glow-cyan), 0 12px 50px #000c;
flex-direction:column; gap:10px;
}
#controlPanel.open { display:flex; }

#controlPanel h4 {
font-family:â€˜Orbitronâ€™; font-size:14px; letter-spacing:2px;
color:var(â€“cyan); border-bottom:1px solid #ffffff15; padding-bottom:10px;
text-align:center; text-shadow:var(â€“glow-cyan);
}

.ctrl-btn {
background: rgba(255,255,255,0.05);
border:1px solid rgba(255,255,255,0.1);
color:#cce8ff; font-family:â€˜Rajdhaniâ€™; font-size:16px; font-weight:600;
padding:10px 14px; border-radius:8px; cursor:pointer;
transition:all 0.2s; text-align:left;
display:flex; align-items:center; gap:10px;
}
.ctrl-btn:hover { background:rgba(0,238,255,0.1); border-color:var(â€“cyan); color:var(â€“cyan); }
.ctrl-btn.red:hover { background:rgba(255,26,26,0.12); border-color:var(â€“red); color:#ff6666; }
.ctrl-btn .icon { font-size:18px; width:22px; text-align:center; }

.ctrl-label { font-size:10px; letter-spacing:2px; color:#ffffff44; text-transform:uppercase; margin-top:4px; }

input[type=range] { width:100%; accent-color:var(â€“cyan); cursor:pointer; height:4px; }

#rateVal, #volVal { font-size:11px; color:#ffffff44; text-align:center; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NEWS COUNTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#newsCounter {
position:fixed; bottom:98px; left:14px;
font-family:â€˜Orbitronâ€™; font-size:13px; font-weight:700; letter-spacing:2px;
color:#ffffff55; z-index:15;
background:rgba(0,0,0,.6); padding:5px 12px; border-radius:20px;
border:1px solid #ffffff10;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TOAST NOTIFICATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#toast {
position:fixed; top:20px; right:20px; z-index:200;
background:rgba(5,0,15,.96); border:1px solid var(â€“red);
color:#ffbbbb; font-size:14px; padding:14px 22px;
border-radius:10px; max-width:340px;
box-shadow: var(â€“glow-red);
transform:translateY(-100px); opacity:0;
transition:all 0.4s cubic-bezier(.22,.68,0,1.2);
font-family:â€˜Rajdhaniâ€™; letter-spacing:1px;
}
#toast.show { transform:translateY(0); opacity:1; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LOADING OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#loadOverlay {
position:fixed; inset:0; z-index:100;
background: radial-gradient(ellipse at center, #060d1f 0%, #000 70%);
display:flex; flex-direction:column; align-items:center; justify-content:center;
transition:opacity 1s ease;
}

#loadOverlay::before {
content:â€™â€™;
position:absolute; inset:0;
background-image: radial-gradient(circle, #00eeff0a 1px, transparent 1px);
background-size:40px 40px;
animation:dotPulse 4s ease infinite;
}

.load-logo {
font-family:â€˜Orbitronâ€™; font-size:72px; font-weight:900;
letter-spacing:14px; color:#fff;
text-shadow: var(â€“glow-red), 0 0 80px #fff3;
animation: loadPulse 2s ease-in-out infinite alternate;
position:relative; z-index:1;
}
@keyframes loadPulse { from{letter-spacing:12px; opacity:.8} to{letter-spacing:16px; opacity:1} }

.load-sub {
font-family:â€˜Rajdhaniâ€™; font-size:14px; letter-spacing:6px;
color:#ffffff44; margin-top:12px; text-transform:uppercase;
position:relative; z-index:1;
}

.load-line {
width:200px; height:2px; background:#ffffff11;
margin:30px auto; border-radius:2px; overflow:hidden;
position:relative; z-index:1;
}
.load-line::after {
content:â€™â€™; position:absolute; left:-100%; top:0; bottom:0;
width:100%; background:linear-gradient(90deg, transparent, var(â€“cyan), transparent);
animation: lineSlide 1.8s linear infinite;
}
@keyframes lineSlide { to{left:200%} }

#startBtn {
margin-top:16px; z-index:1; position:relative;
background: linear-gradient(135deg, #ff2222, #aa0000);
color:#fff; font-family:â€˜Orbitronâ€™; font-size:18px; font-weight:700;
letter-spacing:4px; padding:16px 70px;
border:none; border-radius:8px; cursor:pointer;
box-shadow: var(â€“glow-red);
transition:transform .15s, box-shadow .15s;
}
#startBtn:hover { transform:scale(1.05); box-shadow:0 0 50px #ff1a1acc; }
#startBtn:active { transform:scale(0.97); }
#startBtn:disabled { opacity:.5; cursor:not-allowed; transform:none; }

#loadMsg {
margin-top:18px; z-index:1; position:relative;
font-family:â€˜Rajdhaniâ€™; font-size:14px; letter-spacing:3px;
color:#ffffff55; text-transform:uppercase; min-height:24px;
text-align:center;
}

</style>
</head>
<body>

<!-- â•â•â• LOADING OVERLAY â•â•â• -->

<div id="loadOverlay">
  <div class="load-logo">PTN</div>
  <div class="load-sub">Professional Broadcast Studio â€” Live</div>
  <div class="load-line"></div>
  <button id="startBtn" onclick="initStudio()">â–¶ &nbsp; BROADCAST à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚</button>
  <div id="loadMsg"></div>
</div>

<!-- â•â•â• TOAST â•â•â• -->

<div id="toast"></div>

<!-- â•â•â• MAIN STUDIO â•â•â• -->

<div id="studio">

  <!-- HEADER -->

  <div id="header">
    <div class="logo-wrap">
      <div class="logo-icon">ğŸ“¡</div>
      <div>
        <div class="logo-text">PTN</div>
        <div class="logo-sub">News Pro Studio</div>
      </div>
    </div>

```
<div id="channelName">LIVE BROADCAST</div>

<div class="header-right">
  <div id="liveTag"><div id="liveDot"></div>ON AIR</div>
  <div>
    <div id="timeDisplay">--:--:--</div>
    <div id="dateDisplay">---</div>
  </div>
</div>
```

  </div>

  <!-- SCRIPT BOX -->

  <div id="scriptBox">
    <div id="scriptHeader">
      <div class="sh-dot"></div>
      <div class="sh-dot"></div>
      <div class="sh-dot"></div>
      <div class="sh-label">ğŸ“‹ Teleprompter</div>
      <div class="sh-news-num" id="shNewsNum">â€”</div>
    </div>
    <div id="prompterWrap">
      <div id="teleprompter">à¤¸à¥à¤Ÿà¥‚à¤¡à¤¿à¤¯à¥‹ à¤¤à¥ˆà¤¯à¤¾à¤° à¤¹à¥ˆ...<br>à¤¨à¥à¤¯à¥‚à¤œà¤¼ à¤²à¥‹à¤¡ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ Start à¤¬à¤Ÿà¤¨ à¤¦à¤¬à¤¾à¤à¤‚à¥¤</div>
    </div>
  </div>

  <!-- VISUAL BOX -->

  <div id="visualBox">
    <div class="vb-tl"></div><div class="vb-tr"></div>
    <div class="vb-bl"></div><div class="vb-br"></div>
    <img id="newsImg" src="" alt="">
    <div class="scanlines"></div>
  </div>

  <!-- SIDE STATS -->

  <div id="sidePanel">
    <div class="stat-card">
      <div class="sc-val" id="statNews">â€”</div>
      <div class="sc-lbl">News No.</div>
    </div>
    <div class="stat-card">
      <div class="sc-val" id="statTotal">â€”</div>
      <div class="sc-lbl">Total</div>
    </div>
    <div class="stat-card">
      <div class="sc-val" id="statStatus">â—</div>
      <div class="sc-lbl">Status</div>
    </div>
  </div>

  <!-- ANCHOR -->

  <div id="anchorWrap">
    <canvas id="anchorCanvas"></canvas>
  </div>
  <video id="anchorVid" muted loop crossorigin="anonymous" playsinline>
    <source src="anchor_video.mp4" type="video/mp4">
  </video>

  <!-- LOWER THIRD -->

  <div id="lowerThird">
    <div id="ltTag"><div id="ltTagDot"></div>BREAKING NEWS</div>
    <span id="ltSubline">à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...</span>
  </div>

  <!-- PROGRESS BAR -->

  <div id="progressBar"><div id="progressFill"></div></div>

  <!-- TICKER -->

  <div id="tickerBar">
    <div id="tickerLabel">
      <div class="tl-main">PTN</div>
      <div class="tl-sub">Flash News</div>
    </div>
    <div id="tickerSep"></div>
    <div id="tickerText">
      <div id="tickerInner">
        ğŸ“¡ PTN NEWS LIVE â€” STAY TUNED <span class="sep">â—†</span> BROADCAST à¤¶à¥à¤°à¥‚ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...
      </div>
    </div>
  </div>

  <!-- NEWS COUNTER -->

  <div id="newsCounter">â€” / â€”</div>

  <!-- GEAR BUTTON -->

  <div id="gearBtn" onclick="togglePanel()" title="Controls [C]">âš™ï¸</div>

  <!-- CONTROLS PANEL -->

  <div id="controlPanel">
    <h4>âš™ STUDIO CONTROLS</h4>

```
<div class="ctrl-label">Playback</div>
<button class="ctrl-btn" onclick="skipNews()">
  <span class="icon">â­</span> à¤…à¤—à¤²à¥€ à¤¨à¥à¤¯à¥‚à¤œà¤¼  <kbd style="margin-left:auto;font-size:10px;color:#ffffff33">â†’</kbd>
</button>
<button class="ctrl-btn" onclick="pauseResume()">
  <span class="icon">â¸</span> Pause / Resume  <kbd style="margin-left:auto;font-size:10px;color:#ffffff33">Space</kbd>
</button>
<button class="ctrl-btn" onclick="restartCurrent()">
  <span class="icon">ğŸ”</span> à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤šà¤²à¤¾à¤à¤‚  <kbd style="margin-left:auto;font-size:10px;color:#ffffff33">R</kbd>
</button>

<div class="ctrl-label">Voice Speed</div>
<input type="range" id="rateSlider" min="0.6" max="1.4" step="0.05" value="0.9" oninput="updateRate(this.value)">
<div id="rateVal">Rate: 0.9Ã—</div>

<div class="ctrl-label">Music Volume</div>
<input type="range" id="volSlider" min="0" max="1" step="0.05" value="0.15" oninput="updateVol(this.value)">
<div id="volVal">Vol: 15%</div>

<button class="ctrl-btn red" onclick="stopAll()">
  <span class="icon">â¹</span> Stop All  <kbd style="margin-left:auto;font-size:10px;color:#ffffff33">S</kbd>
</button>
```

  </div>

<audio id="bgMusic" loop><source src="news_theme.mp3" type="audio/mpeg"></audio>

</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONFIG
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CONFIG = {
  sheetId:        '1scDjloS8GTRIStm2jTBLSO55CQVpjLYJfd3fu9sIAgc',
  sheetName:      'Sheet1',
  imageInterval:  8500,
  pauseBetween:   3000,
  defaultRate:    0.9,
  defaultVol:     0.15,
  chromaT:        90,
  chromaR:        1.25,
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let newsItems = [], newsIndex = 0;
let imageInterval = null, chromaRAF = null;
let isPaused = false;
let currentRate = CONFIG.defaultRate;
let progressTimer = null;
let headlineInterval = null, headlineList = [], hlIdx = 0;

const $ = id => document.getElementById(id);

const video        = $('anchorVid');
const canvas       = $('anchorCanvas');
const ctx          = canvas.getContext('2d', { willReadFrequently:true });
const bgMusic      = $('bgMusic');
const teleprompter = $('teleprompter');
const newsImg      = $('newsImg');
const tickerInner  = $('tickerInner');
const lowerThird   = $('lowerThird');
const ltSubline    = $('ltSubline');
const progressFill = $('progressFill');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CLOCK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateClock() {
  const now = new Date();
  $('timeDisplay').textContent =
    String(now.getHours()).padStart(2,'0') + ':' +
    String(now.getMinutes()).padStart(2,'0') + ':' +
    String(now.getSeconds()).padStart(2,'0');
  $('dateDisplay').textContent =
    now.toLocaleDateString('hi-IN', { weekday:'short', day:'2-digit', month:'short', year:'numeric' });
}
setInterval(updateClock, 1000);
updateClock();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TOAST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let toastT;
function showToast(msg, dur=4500) {
  const t = $('toast');
  t.textContent = msg;
  t.classList.add('show');
  clearTimeout(toastT);
  toastT = setTimeout(() => t.classList.remove('show'), dur);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  VOICE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function getHindiVoice() {
  const v = window.speechSynthesis.getVoices();
  return v.find(x => x.lang === 'hi-IN') || v.find(x => x.lang.startsWith('hi')) || null;
}

function loadVoices() {
  return new Promise(res => {
    if (window.speechSynthesis.getVoices().length) { res(); return; }
    window.speechSynthesis.onvoiceschanged = res;
    setTimeout(res, 2000); // fallback
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DATA LOAD
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function loadData() {
  setLoadMsg('ğŸ“¡ Google Sheet à¤¸à¥‡ à¤¡à¥‡à¤Ÿà¤¾ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...');
  const url = `https://docs.google.com/spreadsheets/d/${CONFIG.sheetId}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(CONFIG.sheetName)}`;
  let res;
  try { res = await fetch(url); } catch(e) { throw new Error('Network Error â€” Internet check à¤•à¤°à¥‡à¤‚à¥¤'); }
  if (!res.ok) throw new Error(`HTTP ${res.status}`);
  const text = await res.text();
  const match = text.match(/google\.visualization\.Query\.setResponse\(([\s\S]*)\)/);
  if (!match) throw new Error('Sheet response parse à¤¨à¤¹à¥€à¤‚ à¤¹à¥à¤ˆà¥¤');
  const json = JSON.parse(match[1]);
  if (!json.table || !json.table.rows) throw new Error('Sheet à¤®à¥‡à¤‚ data à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¤¾à¥¤');
  newsItems = json.table.rows.map(row => ({
    headline: row.c[0]?.v ? String(row.c[0].v).trim() : '',
    script:   row.c[1]?.v ? String(row.c[1].v).trim() : '',
    visual:   row.c[2]?.v ? String(row.c[2].v).trim() : '',
    flash:    row.c[3]?.v ? String(row.c[3].v).trim() : '',
  })).filter(i => i.script || i.headline);
  if (!newsItems.length) throw new Error('Sheet à¤®à¥‡à¤‚ valid news à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¥€à¥¤');
  return newsItems.length;
}

function setLoadMsg(m) { $('loadMsg').textContent = m; }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHROMA KEY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function processChroma() {
  if (video.paused || video.ended) return;
  canvas.width  = video.videoWidth  || 640;
  canvas.height = video.videoHeight || 480;
  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
  const f = ctx.getImageData(0, 0, canvas.width, canvas.height);
  const d = f.data, T = CONFIG.chromaT, R = CONFIG.chromaR;
  for (let i = 0; i < d.length; i += 4) {
    if (d[i+1] > T && d[i+1] > d[i]*R && d[i+1] > d[i+2]*R) d[i+3] = 0;
  }
  ctx.putImageData(f, 0, 0);
  chromaRAF = requestAnimationFrame(processChroma);
}

function stopChroma() {
  if (chromaRAF) { cancelAnimationFrame(chromaRAF); chromaRAF = null; }
  ctx.clearRect(0, 0, canvas.width, canvas.height);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SLIDESHOW with Ken Burns
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let kenDir = true;
function startSlideshow(linksText) {
  clearInterval(imageInterval);
  if (!linksText) { newsImg.src = ''; return; }
  const links = linksText.split(',').map(l => l.trim()).filter(Boolean);
  if (!links.length) return;
  let idx = 0;

  const showImg = () => {
    newsImg.style.opacity = '0';
    newsImg.classList.remove('ken-in','ken-out');
    setTimeout(() => {
      newsImg.src = links[idx];
      newsImg.style.opacity = '1';
      void newsImg.offsetWidth;
      newsImg.classList.add(kenDir ? 'ken-in' : 'ken-out');
      kenDir = !kenDir;
    }, 900);
  };

  showImg();
  if (links.length > 1)
    imageInterval = setInterval(() => { idx = (idx + 1) % links.length; showImg(); }, CONFIG.imageInterval);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOWER THIRD â€” Multi-headline
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showLowerThird(headlineText) {
  clearInterval(headlineInterval);
  lowerThird.classList.remove('show');
  headlineList = (headlineText || 'Breaking News').split(',').map(h => h.trim()).filter(Boolean);
  hlIdx = 0;

  const show = () => {
    ltSubline.style.opacity = '0';
    ltSubline.style.transform = 'translateX(-16px)';
    setTimeout(() => {
      ltSubline.textContent = headlineList[hlIdx];
      ltSubline.style.transition = 'opacity .5s ease, transform .5s cubic-bezier(.22,.68,0,1.2)';
      ltSubline.style.opacity = '1';
      ltSubline.style.transform = 'translateX(0)';
      hlIdx = (hlIdx + 1) % headlineList.length;
    }, 280);
  };

  setTimeout(() => {
    lowerThird.classList.add('show');
    show();
    if (headlineList.length > 1) headlineInterval = setInterval(show, 4500);
  }, 400);
}

function hideLowerThird() {
  lowerThird.classList.remove('show');
  clearInterval(headlineInterval);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TICKER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateTicker(flash) {
  tickerInner.innerHTML = flash
    ? `ğŸ“¡ ${flash} <span class="sep">â—†</span> PTN LIVE`
    : 'ğŸ“¡ PTN NEWS LIVE â€” STAY TUNED <span class="sep">â—†</span> à¤¤à¤¾à¤œà¤¼à¤¾ à¤–à¤¬à¤°à¥‡à¤‚';
  tickerInner.style.animation = 'none';
  void tickerInner.offsetWidth;
  tickerInner.style.animation = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  COUNTERS & STATS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateStats(status = 'ON AIR') {
  $('newsCounter').textContent = `${newsIndex + 1} / ${newsItems.length}`;
  $('shNewsNum').textContent   = `${newsIndex + 1} / ${newsItems.length}`;
  $('statNews').textContent    = newsIndex + 1;
  $('statTotal').textContent   = newsItems.length;
  $('statStatus').textContent  = status === 'ON AIR' ? 'ğŸ”´' : status === 'PAUSED' ? 'â¸' : 'â¹';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PROGRESS BAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startProgress(ms) {
  clearInterval(progressTimer);
  progressFill.style.transition = 'none';
  progressFill.style.width = '0%';
  const start = Date.now();
  progressTimer = setInterval(() => {
    const p = Math.min(100, ((Date.now() - start) / ms) * 100);
    progressFill.style.width = p + '%';
    if (p >= 100) clearInterval(progressTimer);
  }, 120);
}

function estimateDur(text, rate) {
  return (text.length / 95) * (1 / rate) * 1000;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PLAY NEWS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function playNews() {
  if (isPaused) return;
  if (newsIndex >= newsItems.length) {
    newsIndex = 0;
    bgMusic.volume = 0.35;
    showToast('âœ… à¤¸à¤­à¥€ à¤¨à¥à¤¯à¥‚à¤œà¤¼ à¤ªà¥‚à¤°à¥€! 5 à¤¸à¥‡à¤•à¤‚à¤¡ à¤®à¥‡à¤‚ Replay...');
    updateStats('IDLE');
    setTimeout(() => { if (!isPaused) playNews(); }, 5000);
    return;
  }

  const item = newsItems[newsIndex];
  const script = item.script || item.headline || '(Script à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¥€)';

  // Teleprompter
  teleprompter.textContent = script;
  teleprompter.style.top = '0px';

  // UI updates
  showLowerThird(item.headline || 'Breaking News');
  updateTicker(item.flash);
  startSlideshow(item.visual);
  updateStats('ON AIR');
  startProgress(estimateDur(script, currentRate));

  // TTS
  window.speechSynthesis.cancel();
  const utt = new SpeechSynthesisUtterance(script);
  utt.lang   = 'hi-IN';
  utt.rate   = currentRate;
  utt.voice  = getHindiVoice();
  utt.volume = 1;

  utt.onstart = () => {
    video.play().catch(() => {});
    canvas.width  = video.videoWidth  || 640;
    canvas.height = video.videoHeight || 480;
    processChroma();
    bgMusic.volume = CONFIG.defaultVol;
    bgMusic.play().catch(() => {});
  };

  utt.onboundary = e => {
    if (e.name !== 'word') return;
    const pct = Math.min(1, e.charIndex / script.length);
    teleprompter.style.top = `-${pct * Math.max(0, teleprompter.scrollHeight - 220)}px`;
  };

  utt.onend = () => {
    stopChroma(); video.pause();
    bgMusic.volume = 0.3;
    hideLowerThird();
    progressFill.style.width = '100%';
    clearInterval(progressTimer);
    newsIndex++;
    setTimeout(() => { if (!isPaused) playNews(); }, CONFIG.pauseBetween);
  };

  utt.onerror = e => {
    if (e.error === 'interrupted') return;
    showToast(`âš ï¸ Speech Error: ${e.error}`);
    newsIndex++;
    setTimeout(playNews, 2000);
  };

  window.speechSynthesis.speak(utt);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONTROLS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function togglePanel() { $('controlPanel').classList.toggle('open'); }

function skipNews() {
  window.speechSynthesis.cancel();
  clearInterval(imageInterval); stopChroma(); video.pause();
  hideLowerThird(); clearInterval(progressTimer);
  newsIndex++;
  setTimeout(() => { if (!isPaused) playNews(); }, 400);
}

function pauseResume() {
  if (isPaused) {
    isPaused = false;
    newsIndex = Math.max(0, newsIndex - 1);
    updateStats('ON AIR');
    playNews();
  } else {
    isPaused = true;
    window.speechSynthesis.cancel();
    stopChroma(); video.pause(); bgMusic.pause();
    hideLowerThird();
    updateStats('PAUSED');
    showToast('â¸ Broadcast Paused â€” Space à¤¦à¤¬à¤¾à¤à¤‚ Resume à¤•à¥‡ à¤²à¤¿à¤');
  }
}

function restartCurrent() {
  window.speechSynthesis.cancel();
  stopChroma(); clearInterval(imageInterval);
  hideLowerThird(); clearInterval(progressTimer);
  newsIndex = Math.max(0, newsIndex - 1);
  isPaused = false;
  setTimeout(playNews, 300);
}

function stopAll() {
  isPaused = true;
  window.speechSynthesis.cancel();
  stopChroma(); video.pause(); bgMusic.pause();
  clearInterval(imageInterval); clearInterval(progressTimer);
  hideLowerThird();
  progressFill.style.width = '0%';
  teleprompter.textContent = 'â¹  Broadcast à¤°à¥‹à¤•à¤¾ à¤—à¤¯à¤¾à¥¤';
  updateStats('STOPPED');
  showToast('â¹ Broadcast à¤¬à¤‚à¤¦à¥¤ à¤«à¤¿à¤° à¤¶à¥à¤°à¥‚ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ Page Reload à¤•à¤°à¥‡à¤‚à¥¤');
}

function updateRate(v) {
  currentRate = parseFloat(v);
  $('rateVal').textContent = `Rate: ${v}Ã—`;
}
function updateVol(v) {
  bgMusic.volume = parseFloat(v);
  $('volVal').textContent = `Vol: ${Math.round(v*100)}%`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  KEYBOARD SHORTCUTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('keydown', e => {
  if (e.target.tagName === 'INPUT') return;
  if (e.code === 'ArrowRight') { e.preventDefault(); skipNews(); }
  if (e.code === 'Space')      { e.preventDefault(); pauseResume(); }
  if (e.code === 'KeyR')       restartCurrent();
  if (e.code === 'KeyS')       stopAll();
  if (e.code === 'KeyC')       togglePanel();
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  VISIBILITY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.addEventListener('visibilitychange', () => {
  bgMusic.volume = document.hidden ? 0.04 : CONFIG.defaultVol;
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function initStudio() {
  const btn = $('startBtn');
  btn.disabled = true; btn.textContent = 'à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...';
  try {
    await loadVoices();
    setLoadMsg('ğŸ¤ Voice Engine Ready...');
    const count = await loadData();
    setLoadMsg(`âœ… ${count} à¤¨à¥à¤¯à¥‚à¤œà¤¼ à¤®à¤¿à¤²à¥€à¤‚! Studio à¤¶à¥à¤°à¥‚ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...`);
    const overlay = $('loadOverlay');
    overlay.style.opacity = '0';
    setTimeout(() => { overlay.style.display = 'none'; }, 1100);
    video.addEventListener('error', () => {});
    setTimeout(playNews, 900);
  } catch(err) {
    setLoadMsg('');
    showToast('âŒ Error: ' + err.message, 8000);
    btn.disabled = false; btn.textContent = 'â–¶ à¤«à¤¿à¤° à¤¸à¥‡ à¤•à¥‹à¤¶à¤¿à¤¶ à¤•à¤°à¥‡à¤‚';
    console.error('[PTN Studio]', err);
  }
}
</script>

</body>
</html>